<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tiny Embeddable Physics Engine: Dynamics</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tiny Embeddable Physics Engine
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Dynamics</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions that deal with defining a model, solving for constraint forces and integrating the simulation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7a5b5b87c6e84b84b9a0b8561f61b8a5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga7a5b5b87c6e84b84b9a0b8561f61b8a5">add_motor</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> motor, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> hinge, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> max_torque)</td></tr>
<tr class="memdesc:ga7a5b5b87c6e84b84b9a0b8561f61b8a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures a motor for a hinge joint.  <a href="#ga7a5b5b87c6e84b84b9a0b8561f61b8a5"></a><br/></td></tr>
<tr class="separator:ga7a5b5b87c6e84b84b9a0b8561f61b8a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c32f3b9013296a488dcc9d82af7ebf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga8c32f3b9013296a488dcc9d82af7ebf2">create_hinge</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> hinge_num, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> b0, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> b1, <a class="el" href="group__tp-types.html#gae822cae3873de6d8036ae86bcf266102">tp_vec3</a> anchor_world_coord, <a class="el" href="group__tp-types.html#gae822cae3873de6d8036ae86bcf266102">tp_vec3</a> axis_world_coord)</td></tr>
<tr class="memdesc:ga8c32f3b9013296a488dcc9d82af7ebf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures a hinge joint between two bodies.  <a href="#ga8c32f3b9013296a488dcc9d82af7ebf2"></a><br/></td></tr>
<tr class="separator:ga8c32f3b9013296a488dcc9d82af7ebf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe34d6540a0734c5dbbb34b841a59139"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#gabe34d6540a0734c5dbbb34b841a59139">update_jacobian</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>)</td></tr>
<tr class="memdesc:gabe34d6540a0734c5dbbb34b841a59139"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the Jacobian after a timestep.  <a href="#gabe34d6540a0734c5dbbb34b841a59139"></a><br/></td></tr>
<tr class="separator:gabe34d6540a0734c5dbbb34b841a59139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcf678a347a30409c260f31f1ba2eb58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#gabcf678a347a30409c260f31f1ba2eb58">hinge_angle</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> hinge_num)</td></tr>
<tr class="memdesc:gabcf678a347a30409c260f31f1ba2eb58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current angle of hinge joint.  <a href="#gabcf678a347a30409c260f31f1ba2eb58"></a><br/></td></tr>
<tr class="separator:gabcf678a347a30409c260f31f1ba2eb58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0df2d1b692e57fc89bbdb0be37345cb5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga0df2d1b692e57fc89bbdb0be37345cb5">hinge_angle_rate</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a> hinge_num)</td></tr>
<tr class="memdesc:ga0df2d1b692e57fc89bbdb0be37345cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns angle rate of hinge joint.  <a href="#ga0df2d1b692e57fc89bbdb0be37345cb5"></a><br/></td></tr>
<tr class="separator:ga0df2d1b692e57fc89bbdb0be37345cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74c7d91a7e152bcc0eb706dc00a31e51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gae46ee44ad0670ced5d223c89af7dd855">TP_FUNC_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga74c7d91a7e152bcc0eb706dc00a31e51">set_box_inertia</a> (<a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> mass, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *<a class="el" href="group__tp-mem.html#ga3d289705db76131c2bef794693da1666">mi</a>, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> xlen, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> ylen, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> zlen, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *<a class="el" href="group__tp-mem.html#ga7eae98d17c5ed46bf34155f54a99b8c3">Ibi</a>)</td></tr>
<tr class="memdesc:ga74c7d91a7e152bcc0eb706dc00a31e51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the mass and inertia of a box with uniform density.  <a href="#ga74c7d91a7e152bcc0eb706dc00a31e51"></a><br/></td></tr>
<tr class="separator:ga74c7d91a7e152bcc0eb706dc00a31e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d9216df674eb768ff062d136a44de31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gae46ee44ad0670ced5d223c89af7dd855">TP_FUNC_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga4d9216df674eb768ff062d136a44de31">set_box_inertia</a> (<a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> mass, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *<a class="el" href="group__tp-mem.html#ga3d289705db76131c2bef794693da1666">mi</a>, const <a class="el" href="group__tp-types.html#gae822cae3873de6d8036ae86bcf266102">tp_vec3</a> dim, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *<a class="el" href="group__tp-mem.html#ga7eae98d17c5ed46bf34155f54a99b8c3">Ibi</a>)</td></tr>
<tr class="memdesc:ga4d9216df674eb768ff062d136a44de31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the mass and inertia of a box with uniform density.  <a href="#ga4d9216df674eb768ff062d136a44de31"></a><br/></td></tr>
<tr class="separator:ga4d9216df674eb768ff062d136a44de31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad5fd720b14d0257094eeae1894cb6e55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gae46ee44ad0670ced5d223c89af7dd855">TP_FUNC_INLINE</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#gad5fd720b14d0257094eeae1894cb6e55">set_cylinder_inertia</a> (<a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> mass, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *<a class="el" href="group__tp-mem.html#ga3d289705db76131c2bef794693da1666">mi</a>, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> radius, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> height, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *<a class="el" href="group__tp-mem.html#ga7eae98d17c5ed46bf34155f54a99b8c3">Ibi</a>)</td></tr>
<tr class="memdesc:gad5fd720b14d0257094eeae1894cb6e55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the mass and inertia of a cylinder with uniform density.  <a href="#gad5fd720b14d0257094eeae1894cb6e55"></a><br/></td></tr>
<tr class="separator:gad5fd720b14d0257094eeae1894cb6e55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1f41f320af39f3f4fe513001f061dea2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga1f41f320af39f3f4fe513001f061dea2">step_world</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> dt, int num_iterations)</td></tr>
<tr class="memdesc:ga1f41f320af39f3f4fe513001f061dea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Steps a simulation world a dt amount of seconds.  <a href="#ga1f41f320af39f3f4fe513001f061dea2"></a><br/></td></tr>
<tr class="separator:ga1f41f320af39f3f4fe513001f061dea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Constraint Solver Functions</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp4d5a574c938870d56298c2f50fb82d22"></a>The system is solved by the Projected Gauss-Seidel implementation found presented in:</p>
<p>E. Catto. Iterative dynamics with temporal coherence. In Game Developer Conference, pages 1–24, 2005.</p>
<p>As such, an iterative approach is used where the <img class="formulaInl" alt="$i$" src="form_6.png"/>th Lagrange multiplier change at each iteration as </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ \Delta \lambda_i = \frac{1}{d_i}(rhs - J_i\cdot a) \]" src="form_7.png"/>
</p>
<p> where <img class="formulaInl" alt="$J_i$" src="form_8.png"/> is the <img class="formulaInl" alt="$i$" src="form_6.png"/>th Jacobian row, <img class="formulaInl" alt="$a = B\lambda_0$" src="form_9.png"/>, <img class="formulaInl" alt="$B=M^{-1}J^{\mathrm{T}}$" src="form_10.png"/>, <img class="formulaInl" alt="$d$" src="form_3.png"/> is the diagonal of <img class="formulaInl" alt="$JB$" src="form_4.png"/> and <img class="formulaInl" alt="$rhs$" src="form_5.png"/> is the right hand side. </p>
</td></tr>
<tr class="memitem:ga08132f253446a2b3c6c556ab1aa887a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga08132f253446a2b3c6c556ab1aa887a6">compute_B</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>)</td></tr>
<tr class="memdesc:ga08132f253446a2b3c6c556ab1aa887a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the B vector.  <a href="#ga08132f253446a2b3c6c556ab1aa887a6"></a><br/></td></tr>
<tr class="separator:ga08132f253446a2b3c6c556ab1aa887a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab0df38c476d1aadcb0456bed09d12f85"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#gab0df38c476d1aadcb0456bed09d12f85">compute_a</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>)</td></tr>
<tr class="memdesc:gab0df38c476d1aadcb0456bed09d12f85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the <img class="formulaInl" alt="$a$" src="form_2.png"/> vector.  <a href="#gab0df38c476d1aadcb0456bed09d12f85"></a><br/></td></tr>
<tr class="separator:gab0df38c476d1aadcb0456bed09d12f85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga73f4066df6ddbfcfbc807e76d6641ea6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga73f4066df6ddbfcfbc807e76d6641ea6">compute_Fc_add_to_Fe</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>)</td></tr>
<tr class="memdesc:ga73f4066df6ddbfcfbc807e76d6641ea6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the constraint forces without separate storage.  <a href="#ga73f4066df6ddbfcfbc807e76d6641ea6"></a><br/></td></tr>
<tr class="separator:ga73f4066df6ddbfcfbc807e76d6641ea6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab7318769ab2b94e2f714ad5cb0158be5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#gab7318769ab2b94e2f714ad5cb0158be5">compute_Fc</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>)</td></tr>
<tr class="memdesc:gab7318769ab2b94e2f714ad5cb0158be5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the constraint forces.  <a href="#gab7318769ab2b94e2f714ad5cb0158be5"></a><br/></td></tr>
<tr class="separator:gab7318769ab2b94e2f714ad5cb0158be5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeef84319a5d207904de7e1319a6abfe4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#gaeef84319a5d207904de7e1319a6abfe4">compute_d</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>)</td></tr>
<tr class="memdesc:gaeef84319a5d207904de7e1319a6abfe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the <img class="formulaInl" alt="$d$" src="form_3.png"/> vector.  <a href="#gaeef84319a5d207904de7e1319a6abfe4"></a><br/></td></tr>
<tr class="separator:gaeef84319a5d207904de7e1319a6abfe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2d2a9b037738b6ff8bda4b66b7d96c95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga2d2a9b037738b6ff8bda4b66b7d96c95">compute_rhs</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> dt)</td></tr>
<tr class="memdesc:ga2d2a9b037738b6ff8bda4b66b7d96c95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes the <img class="formulaInl" alt="$rhs$" src="form_5.png"/> vector.  <a href="#ga2d2a9b037738b6ff8bda4b66b7d96c95"></a><br/></td></tr>
<tr class="separator:ga2d2a9b037738b6ff8bda4b66b7d96c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77d33173d29501b8560d624425512cad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga77d33173d29501b8560d624425512cad">clamp</a> (<a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> old, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> delta, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> min, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> max)</td></tr>
<tr class="memdesc:ga77d33173d29501b8560d624425512cad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clamps a change to a float variable.  <a href="#ga77d33173d29501b8560d624425512cad"></a><br/></td></tr>
<tr class="separator:ga77d33173d29501b8560d624425512cad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9dec2bace90601f119f10c6924dc30b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga9dec2bace90601f119f10c6924dc30b0">clamp2</a> (<a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> old, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> delta, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> min, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> max)</td></tr>
<tr class="memdesc:ga9dec2bace90601f119f10c6924dc30b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clamps a change to a float variable.  <a href="#ga9dec2bace90601f119f10c6924dc30b0"></a><br/></td></tr>
<tr class="separator:ga9dec2bace90601f119f10c6924dc30b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga903cf679628f1cc418c0c80a3b2d2fbf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__tp-dynamics.html#ga903cf679628f1cc418c0c80a3b2d2fbf">solve_for_lambda</a> (struct mem_t *<a class="el" href="group__tp-mem.html#ga6713a19995caf856c9794df1ba75fe80">m</a>, <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> dt, int num_iterations)</td></tr>
<tr class="memdesc:ga903cf679628f1cc418c0c80a3b2d2fbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solves for Lagrange multiplier by Projected Gauss-Seidel.  <a href="#ga903cf679628f1cc418c0c80a3b2d2fbf"></a><br/></td></tr>
<tr class="separator:ga903cf679628f1cc418c0c80a3b2d2fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions that deal with defining a model, solving for constraint forces and integrating the simulation. </p>
<p>Many of the functions in the Dynamics module are only used internally in TEPE, and is not to be used by a user directly. The following functions are however "user-functions":</p>
<ul>
<li><a class="el" href="group__tp-dynamics.html#ga74c7d91a7e152bcc0eb706dc00a31e51" title="Configures the mass and inertia of a box with uniform density.">set_box_inertia()</a></li>
<li><a class="el" href="group__tp-dynamics.html#gad5fd720b14d0257094eeae1894cb6e55" title="Configures the mass and inertia of a cylinder with uniform density.">set_cylinder_inertia()</a></li>
<li><a class="el" href="group__tp-dynamics.html#ga8c32f3b9013296a488dcc9d82af7ebf2" title="Configures a hinge joint between two bodies.">create_hinge()</a></li>
<li><a class="el" href="group__tp-dynamics.html#ga7a5b5b87c6e84b84b9a0b8561f61b8a5" title="Configures a motor for a hinge joint.">add_motor()</a></li>
<li><a class="el" href="group__tp-dynamics.html#gabcf678a347a30409c260f31f1ba2eb58" title="Returns the current angle of hinge joint.">hinge_angle()</a></li>
<li><a class="el" href="group__tp-dynamics.html#ga0df2d1b692e57fc89bbdb0be37345cb5" title="Returns angle rate of hinge joint.">hinge_angle_rate()</a></li>
<li><a class="el" href="group__tp-dynamics.html#ga1f41f320af39f3f4fe513001f061dea2" title="Steps a simulation world a dt amount of seconds.">step_world()</a></li>
</ul>
<p>See <a class="el" href="index.html#main-usage">Usage </a> for more details how to setup a simulation. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga7a5b5b87c6e84b84b9a0b8561f61b8a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void add_motor </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>motor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>hinge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>max_torque</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures a motor for a hinge joint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
    <tr><td class="paramname">motor</td><td>Index of motor to configure. </td></tr>
    <tr><td class="paramname">hinge</td><td>Index of hinge the motor is connected to. </td></tr>
    <tr><td class="paramname">max_torque</td><td>Maximum torque in Nm for motor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga77d33173d29501b8560d624425512cad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> clamp </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clamps a change to a float variable. </p>
<p>Adds a change to a float, but keeps the float inside a given interval. Uses no if-statements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old</td><td>Current value. </td></tr>
    <tr><td class="paramname">delta</td><td>Change in value. </td></tr>
    <tr><td class="paramname">min</td><td>Lower-end of interval. </td></tr>
    <tr><td class="paramname">max</td><td>Upper-end of interval. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the clamped value. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9dec2bace90601f119f10c6924dc30b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> clamp2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>delta</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clamps a change to a float variable. </p>
<p>Adds a change to a float, but keeps the float inside a given interval. Uses if-statements!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old</td><td>Current value. </td></tr>
    <tr><td class="paramname">delta</td><td>Change in value. </td></tr>
    <tr><td class="paramname">min</td><td>Lower-end of interval. </td></tr>
    <tr><td class="paramname">max</td><td>Upper-end of interval. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the clamped value. </dd></dl>

</div>
</div>
<a class="anchor" id="gab0df38c476d1aadcb0456bed09d12f85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void compute_a </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the <img class="formulaInl" alt="$a$" src="form_2.png"/> vector. </p>
<p>Computes <img class="formulaInl" alt="$a = B\lambda$" src="form_12.png"/>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga08132f253446a2b3c6c556ab1aa887a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void compute_B </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the B vector. </p>
<p>Computes <img class="formulaInl" alt="$B = M^{-1}J^{T}$" src="form_11.png"/>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaeef84319a5d207904de7e1319a6abfe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void compute_d </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the <img class="formulaInl" alt="$d$" src="form_3.png"/> vector. </p>
<p>Computes <img class="formulaInl" alt="$d = JB$" src="form_15.png"/>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab7318769ab2b94e2f714ad5cb0158be5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void compute_Fc </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the constraint forces. </p>
<p>The constraint forces <img class="formulaInl" alt="$F_c$" src="form_13.png"/> are computed as <img class="formulaInl" alt="$F_c = J_T\lambda$" src="form_14.png"/>. If the TP_DEBUG macro is defined <img class="formulaInl" alt="$F_c$" src="form_13.png"/>, this function is available which makes the constraint forces stored separately from the external forces.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga73f4066df6ddbfcfbc807e76d6641ea6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void compute_Fc_add_to_Fe </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the constraint forces without separate storage. </p>
<p>The constraint forces <img class="formulaInl" alt="$F_c$" src="form_13.png"/> are computed as <img class="formulaInl" alt="$F_c = J_T\lambda$" src="form_14.png"/>. Using this function saves storage, since it saves the forces, by adding them to the external forces.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2d2a9b037738b6ff8bda4b66b7d96c95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void compute_rhs </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>dt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes the <img class="formulaInl" alt="$rhs$" src="form_5.png"/> vector. </p>
<p>Computes <img class="formulaInl" alt="$rhs = \frac{1}{\Delta t}\epsilon - \frac{1}{\Delta t}Ju - JM^{-1}F_e$" src="form_16.png"/>. Here <img class="formulaInl" alt="$u$" src="form_17.png"/> represents the system velocity vector, and <img class="formulaInl" alt="$F_e$" src="form_18.png"/> the external forces.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
    <tr><td class="paramname">dt</td><td>Simulation timestep. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8c32f3b9013296a488dcc9d82af7ebf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void create_hinge </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>hinge_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>b0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>b1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae822cae3873de6d8036ae86bcf266102">tp_vec3</a>&#160;</td>
          <td class="paramname"><em>anchor_world_coord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae822cae3873de6d8036ae86bcf266102">tp_vec3</a>&#160;</td>
          <td class="paramname"><em>axis_world_coord</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures a hinge joint between two bodies. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
    <tr><td class="paramname">hinge_num</td><td>Index of hinge to configure. </td></tr>
    <tr><td class="paramname">b0</td><td>Index of first body of hinge joint. </td></tr>
    <tr><td class="paramname">b1</td><td>Index of second body of hinge joint. </td></tr>
    <tr><td class="paramname">anchor_world_coord</td><td>Hinge anchor in world coordinates. </td></tr>
    <tr><td class="paramname">axis_world_coord</td><td>Direction of hinge axis in world coordinates. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabcf678a347a30409c260f31f1ba2eb58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> hinge_angle </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>hinge_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current angle of hinge joint. </p>
<p>The angle of the hinge joint is the angle that describes how many radians the two connected bodies are offset from the initial configuration. The offset returned is within the interval -PI to PI.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
    <tr><td class="paramname">hinge_num</td><td>Index of hinge. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>current angle in radians. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0df2d1b692e57fc89bbdb0be37345cb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> <a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> hinge_angle_rate </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#gae25133fb6e6de8f60e0dcc437146d2fe">index_t</a>&#160;</td>
          <td class="paramname"><em>hinge_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns angle rate of hinge joint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
    <tr><td class="paramname">hinge_num</td><td>Index of hinge. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the angle rate of hinge joint in radians per second. </dd></dl>

</div>
</div>
<a class="anchor" id="ga74c7d91a7e152bcc0eb706dc00a31e51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gae46ee44ad0670ced5d223c89af7dd855">TP_FUNC_INLINE</a> void set_box_inertia </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>mass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *&#160;</td>
          <td class="paramname"><em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>xlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>ylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>zlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *&#160;</td>
          <td class="paramname"><em>Ibi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the mass and inertia of a box with uniform density. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mass</td><td>Mass of the box. </td></tr>
    <tr><td class="paramname">mi</td><td>Pointer to memory location where inverse mass is to be stored. </td></tr>
    <tr><td class="paramname">xlen</td><td>The x-dimension of the box. </td></tr>
    <tr><td class="paramname">ylen</td><td>The y-dimension of the box. </td></tr>
    <tr><td class="paramname">zlen</td><td>The z-dimension of the box. </td></tr>
    <tr><td class="paramname">Ibi</td><td>Pointer to memory location where inertia tensor is to be stored. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4d9216df674eb768ff062d136a44de31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gae46ee44ad0670ced5d223c89af7dd855">TP_FUNC_INLINE</a> void set_box_inertia </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>mass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *&#160;</td>
          <td class="paramname"><em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__tp-types.html#gae822cae3873de6d8036ae86bcf266102">tp_vec3</a>&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *&#160;</td>
          <td class="paramname"><em>Ibi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the mass and inertia of a box with uniform density. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mass</td><td>Mass of the box. </td></tr>
    <tr><td class="paramname">mi</td><td>Pointer to memory location where inverse mass is to be stored. </td></tr>
    <tr><td class="paramname">dim</td><td>3D vector containing box dimensions. </td></tr>
    <tr><td class="paramname">Ibi</td><td>Pointer to memory location where inertia tensor is to be stored. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad5fd720b14d0257094eeae1894cb6e55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gae46ee44ad0670ced5d223c89af7dd855">TP_FUNC_INLINE</a> void set_cylinder_inertia </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>mass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *&#160;</td>
          <td class="paramname"><em>mi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a> *&#160;</td>
          <td class="paramname"><em>Ibi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the mass and inertia of a cylinder with uniform density. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mass</td><td>Mass of the box. </td></tr>
    <tr><td class="paramname">mi</td><td>Pointer to memory location where inverse mass is to be stored. </td></tr>
    <tr><td class="paramname">radius</td><td>Cylinder radius in meter. </td></tr>
    <tr><td class="paramname">height</td><td>Cylinder height in meter. </td></tr>
    <tr><td class="paramname">Ibi</td><td>Pointer to memory location where inertia tensor is to be stored. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga903cf679628f1cc418c0c80a3b2d2fbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void solve_for_lambda </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_iterations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Solves for Lagrange multiplier by Projected Gauss-Seidel. </p>
<p>Computes <img class="formulaInl" alt="$rhs = \frac{1}{\Delta t}\epsilon - \frac{1}{\Delta t}Ju - JM^{-1}F_e$" src="form_16.png"/>. Here <img class="formulaInl" alt="$u$" src="form_17.png"/> represents the system velocity vector, and <img class="formulaInl" alt="$F_e$" src="form_18.png"/> the external forces.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
    <tr><td class="paramname">dt</td><td>Simulation timestep. </td></tr>
    <tr><td class="paramname">num_iterations</td><td>Number of iterations. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1f41f320af39f3f4fe513001f061dea2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void step_world </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__tp-types.html#ga0d00e2b3dfadee81331bbb39068570c4">real_t</a>&#160;</td>
          <td class="paramname"><em>dt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_iterations</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Steps a simulation world a dt amount of seconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing world. </td></tr>
    <tr><td class="paramname">dt</td><td>Size of timestep (seconds). </td></tr>
    <tr><td class="paramname">num_iterations</td><td>Number of iterations to use in constraint force solver. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabe34d6540a0734c5dbbb34b841a59139"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__tp-types.html#gaa70654b1916415160a0319413edcae3b">TP_FUNC</a> void update_jacobian </td>
          <td>(</td>
          <td class="paramtype">struct mem_t *&#160;</td>
          <td class="paramname"><em>m</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the Jacobian after a timestep. </p>
<p>Every time when the simulation has been progressed one timestep, positions and velocities of the bodies has (most likely) changed. Because of this the Jacobian entries for the constraining joints are old and need to be updated. This functions does exactly that.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m</td><td>Pointer to the memory representing the simulation world. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Dec 17 2013 23:35:26 for Tiny Embeddable Physics Engine by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
